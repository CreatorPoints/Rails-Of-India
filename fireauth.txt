// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDydOzvB5GwvSNAEcfyAFaD167ftlwW2U8",
  authDomain: "rails-of-india-27a93.firebaseapp.com",
  projectId: "rails-of-india-27a93",
  storageBucket: "rails-of-india-27a93.firebasestorage.app",
  messagingSenderId: "678135111193",
  appId: "1:678135111193:web:4f8d3d052b1909edd25488",
  measurementId: "G-PDPPRYL5N8"
};
// Google login
const googleProvider = new firebase.auth.GoogleAuthProvider();
document.getElementById("googleSignIn").addEventListener("click", () => {
  auth.signInWithPopup(googleProvider)
    .then(result => {
      alert(`Welcome, ${result.user.displayName}`);
      console.log(result.user);
    })
    .catch(error => alert(error.message));
});

// Email login
document.getElementById("emailSignIn").addEventListener("click", () => {
  const email = document.getElementById("emailInput").value;
  const password = document.getElementById("passwordInput").value;

  auth.signInWithEmailAndPassword(email, password)
    .then(result => alert(`Welcome, ${result.user.email}`))
    .catch(error => alert(error.message));
});

// Email signup
document.getElementById("emailSignUp").addEventListener("click", () => {
  const email = document.getElementById("emailInput").value;
  const password = document.getElementById("passwordInput").value;

  auth.createUserWithEmailAndPassword(email, password)
    .then(result => alert(`Account created: ${result.user.email}`))
    .catch(error => alert(error.message));
});
auth.onAuthStateChanged(user => {
  if(user){
    // User logged in
    console.log("User signed in:", user);
    // Update navbar: show username, hide login buttons
  } else {
    // User logged out
    console.log("No user signed in");
    // Show login buttons
  }
});
